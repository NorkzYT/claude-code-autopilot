#!/usr/bin/env bash
set -euo pipefail

# codex-local
# Runs Codex with project-local state instead of ~/.codex.
#
# Usage:
#   codex-local [codex args...]

if ! command -v codex >/dev/null 2>&1; then
  echo "ERROR: 'codex' CLI not found in PATH." >&2
  exit 1
fi

PROJECT_ROOT="${PWD}"
LOCAL_CODEX_HOME="${PROJECT_ROOT}/.codex-home"
mkdir -p "$LOCAL_CODEX_HOME"

exec env CODEX_HOME="$LOCAL_CODEX_HOME" codex "$@"

