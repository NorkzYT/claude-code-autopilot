# AGENTS.md - {{DISPLAY_NAME}} Workspace

This folder is home for the {{DISPLAY_NAME}} agent. Treat it that way.

## CRITICAL: File Location Rules

**All persona files live EXCLUSIVELY in `.openclaw/` -- NEVER create SOUL.md, USER.md, IDENTITY.md, TOOLS.md, HEARTBEAT.md, MEMORY.md, BOOTSTRAP.md, or any other persona/config files at the repository root.**

Exception: A repository-root `AGENTS.md` may exist only as a thin Codex compatibility shim generated by bootstrap. Keep all real persona content in `.openclaw/`.

If you need to create or update any of these files, the path MUST start with `.openclaw/`. For example:
- `.openclaw/SOUL.md` (CORRECT)
- `SOUL.md` at repo root (WRONG -- never do this)

## First Run

If `.openclaw/BOOTSTRAP.md` exists, that's your birth certificate. Follow it, figure out who you are, then delete it. You won't need it again.

## Every Session

Before doing anything else:

1. Read `.openclaw/SOUL.md` -- this is who you are
2. Read `.openclaw/USER.md` -- this is who you're helping
3. Read `.openclaw/memory/YYYY-MM-DD.md` (today + yesterday) for recent context
4. **If in MAIN SESSION** (direct chat with your human): Also read `.openclaw/MEMORY.md`

Don't ask permission. Just do it.

## Memory

You wake up fresh each session. These files are your continuity:

- **Daily notes:** `.openclaw/memory/YYYY-MM-DD.md` (create `.openclaw/memory/` if needed) -- raw logs of what happened
- **Long-term:** `.openclaw/MEMORY.md` -- your curated memories

## Session History

Past conversation transcripts are stored in `.openclaw/sessions/`. Use these to review what happened in previous sessions:
- `.openclaw/sessions/*.jsonl` -- Full conversation logs (JSONL format)
- `.openclaw/sessions/sessions.json` -- Session index with metadata

## Project Context

This workspace is the {{DISPLAY_NAME}} project at `{{WORKSPACE_PATH}}`.

### Key Commands
- Check the project's README or Makefile for available commands
- Run tests before committing changes
- Follow existing code style and conventions

### Claude Code Integration
- `.claude/CLAUDE.md` -- Project constitution (if present)
- `.claude/skills/` -- Claude Code skills
- `.openclaw/skills/` -- OpenClaw skills (with YAML frontmatter)
- `.agents/skills/` -- Codex-compatible shared skills (symlink to `.openclaw/skills/`)
- `.codex/rules/default.rules` -- Codex command guardrails aligned with `.claude/hooks/guard_bash.py`

## Engineering Execution

### Default: Work Directly (Codex / current model)

For most tasks, work directly without delegating to sub-agents:
1. Read PROJECT.md and relevant source files
2. Make the code change
3. Run build command from TOOLS.md
4. Run test command from TOOLS.md
5. Verify the change works
6. Commit on feature branch
7. Report what changed and what was tested

This covers: bug fixes, small features, refactors, config changes, docs, and any task touching 1-3 files.

### Escalate to Claude: Complex Multi-File Tasks Only

For tasks requiring deep architectural changes or multi-component coordination, escalate to the Claude autopilot pipeline:

```
Use the autopilot subagent (Task tool with subagent_type=autopilot) for this task: <description>
```

**Escalate when ALL of these are true:**
- Task touches 4+ files across different modules/packages
- Requires architectural decisions (new patterns, service boundaries)
- Benefits from specialist review (security audit, type system, performance)
- Risk of regression is high (core business logic, auth, data layer)

**Do NOT escalate for:**
- Single-file bug fixes
- Adding/modifying tests
- Documentation updates
- Config/environment changes
- UI tweaks or styling
- Dependency updates
- Code that follows an existing pattern

When in doubt, do the work directly. Escalation has a high token cost.

## Task Completion Protocol

For EVERY bug fix or feature:
1. **Understand** — Read PROJECT.md, relevant source files
2. **Fix** — Make the code change
3. **Build** — Run build command from TOOLS.md
4. **Test** — Run test command from TOOLS.md
5. **Verify** — Browser-check if UI change (via CDP)
6. **Commit** — On feature branch, not main
7. **Report** — Summary of what changed, what was tested

NEVER mark a task done after only writing code.
